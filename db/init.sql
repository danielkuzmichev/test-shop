SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

CREATE TABLE IF NOT EXISTS categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    category_id INT,
    price DECIMAL(10, 2),
    FOREIGN KEY (category_id) REFERENCES categories(id)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT,
    purchase_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS statistics (
    id INT AUTO_INCREMENT PRIMARY KEY,
    action VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB;

-- Insert test data (only if tables are empty)
INSERT IGNORE INTO categories (id, name) VALUES 
(1, 'Electronics'), 
(2, 'Clothing');

INSERT IGNORE INTO products (id, name, category_id, price) VALUES 
(1, 'Phone', 1, 999.99),
(2, 'T-Shirt', 2, 19.99);

INSERT IGNORE INTO orders (id, product_id, purchase_time) VALUES
(1, 1, '2023-01-01 10:00:00'),
(2, 2, '2023-01-01 10:15:00'),
(3, 1, '2023-01-01 11:30:00'),
(4, 2, '2023-01-01 12:45:00'),
(5, 1, '2023-01-02 09:20:00'),
(6, 2, '2023-01-02 14:10:00'),
(7, 1, '2023-01-03 16:30:00'),
(8, 2, '2023-01-03 18:45:00'),
(9, 1, '2023-01-04 10:10:00'),
(10, 2, '2023-01-04 11:25:00'),
(11, 1, '2023-01-05 13:40:00'),
(12, 2, '2023-01-05 15:55:00'),
(13, 1, '2023-01-06 08:30:00'),
(14, 2, '2023-01-06 17:20:00'),
(15, 1, '2023-01-07 10:45:00'),
(16, 2, '2023-01-07 12:00:00'),
(17, 1, '2023-01-08 14:15:00'),
(18, 2, '2023-01-08 16:30:00'),
(19, 1, '2023-01-09 09:45:00'),
(20, 2, '2023-01-09 18:00:00'),
(21, 1, '2023-01-10 10:10:00'),
(22, 2, '2023-01-10 11:20:00'),
(23, 1, '2023-01-11 12:30:00'),
(24, 2, '2023-01-11 13:40:00'),
(25, 1, '2023-01-12 14:50:00'),
(26, 2, '2023-01-12 16:00:00'),
(27, 1, '2023-01-13 09:10:00'),
(28, 2, '2023-01-13 10:20:00'),
(29, 1, '2023-01-14 11:30:00'),
(30, 2, '2023-01-14 12:40:00'),
(31, 1, '2023-01-15 13:50:00'),
(32, 2, '2023-01-15 15:00:00'),
(33, 1, '2023-01-16 16:10:00'),
(34, 2, '2023-01-16 17:20:00'),
(35, 1, '2023-01-17 08:30:00'),
(36, 2, '2023-01-17 09:40:00'),
(37, 1, '2023-01-18 10:50:00'),
(38, 2, '2023-01-18 12:00:00'),
(39, 1, '2023-01-19 13:10:00'),
(40, 2, '2023-01-19 14:20:00'),
(41, 1, '2023-01-20 15:30:00'),
(42, 2, '2023-01-20 16:40:00'),
(43, 1, '2023-01-21 17:50:00'),
(44, 2, '2023-01-21 19:00:00'),
(45, 1, '2023-01-22 08:10:00'),
(46, 2, '2023-01-22 09:20:00'),
(47, 1, '2023-01-23 10:30:00'),
(48, 2, '2023-01-23 11:40:00'),
(49, 1, '2023-01-24 12:50:00'),
(50, 2, '2023-01-24 14:00:00'),
(51, 1, '2023-01-25 15:10:00'),
(52, 2, '2023-01-25 16:20:00'),
(53, 1, '2023-01-26 17:30:00'),
(54, 2, '2023-01-26 18:40:00'),
(55, 1, '2023-01-27 19:50:00'),
(56, 2, '2023-01-27 20:00:00'),
(57, 1, '2023-01-28 09:15:00'),
(58, 2, '2023-01-28 10:30:00'),
(59, 1, '2023-01-29 11:45:00'),
(60, 2, '2023-01-29 13:00:00'),
(61, 1, '2023-01-30 14:15:00'),
(62, 2, '2023-01-30 15:30:00'),
(63, 1, '2023-01-31 16:45:00'),
(64, 2, '2023-01-31 18:00:00'),
(65, 1, '2023-02-01 09:15:00'),
(66, 2, '2023-02-01 10:30:00'),
(67, 1, '2023-02-02 11:45:00'),
(68, 2, '2023-02-02 13:00:00'),
(69, 1, '2023-02-03 14:15:00'),
(70, 2, '2023-02-03 15:30:00'),
(71, 1, '2023-02-04 16:45:00'),
(72, 2, '2023-02-04 18:00:00'),
(73, 1, '2023-02-05 09:15:00'),
(74, 2, '2023-02-05 10:30:00'),
(75, 1, '2023-02-06 11:45:00'),
(76, 2, '2023-02-06 13:00:00'),
(77, 1, '2023-02-07 14:15:00'),
(78, 2, '2023-02-07 15:30:00'),
(79, 1, '2023-02-08 16:45:00'),
(80, 2, '2023-02-08 18:00:00'),
(81, 1, '2023-02-09 09:15:00'),
(82, 2, '2023-02-09 10:30:00'),
(83, 1, '2023-02-10 11:45:00'),
(84, 2, '2023-02-10 13:00:00'),
(85, 1, '2023-02-11 14:15:00'),
(86, 2, '2023-02-11 15:30:00'),
(87, 1, '2023-02-12 16:45:00'),
(88, 2, '2023-02-12 18:00:00'),
(89, 1, '2023-02-13 09:15:00'),
(90, 2, '2023-02-13 10:30:00'),
(91, 1, '2023-02-14 11:45:00'),
(92, 2, '2023-02-14 13:00:00'),
(93, 1, '2023-02-15 14:15:00'),
(94, 2, '2023-02-15 15:30:00'),
(95, 1, '2023-02-16 16:45:00'),
(96, 2, '2023-02-16 18:00:00'),
(97, 1, '2023-02-17 09:15:00'),
(98, 2, '2023-02-17 10:30:00'),
(99, 1, '2023-02-18 11:45:00'),
(100, 2, '2023-02-18 13:00:00');